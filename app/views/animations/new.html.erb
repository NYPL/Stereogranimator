<% content_for :dynamic_js do %>
<!-- non compiled JS (heroku limitation) -->
<script src="/assets/easel.js?body=1" type="text/javascript"></script>
<script src="/assets/src/easeljs/utils/UID.js?body=1" type="text/javascript"></script>
<script src="/assets/src/easeljs/geom/Matrix2D.js?body=1" type="text/javascript"></script>
<script src="/assets/src/easeljs/events/MouseEvent.js?body=1" type="text/javascript"></script>
<script src="/assets/src/easeljs/display/DisplayObject.js?body=1" type="text/javascript"></script>
<script src="/assets/src/easeljs/display/Container.js?body=1" type="text/javascript"></script>

<script src="/assets/src/easeljs/display/Bitmap.js?body=1" type="text/javascript"></script>
<script src="/assets/src/easeljs/display/Graphics.js?body=1" type="text/javascript"></script>
<script src="/assets/src/easeljs/display/Shape.js?body=1" type="text/javascript"></script>
<script src="/assets/src/easeljs/display/Stage.js?body=1" type="text/javascript"></script>
<script src="/assets/src/easeljs/utils/Ticker.js?body=1" type="text/javascript"></script>
<script src="/assets/src/easeljs/geom/Point.js?body=1" type="text/javascript"></script>
<script src="/assets/src/easeljs/ui/Touch.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.getimagedata.min.js?body=1" type="text/javascript"></script>
<!-- end non-compiled -->
<script>
// establish the photo to be used
index = "<%= params[:did] %>";
sheetsrc = "<%= image_path('sprites.png') %>"
if (Modernizr.canvas) {
	console.log("<canvas> support present");
	window.onload = init;
} else {
	console.log("<canvas> support NOT present");
	window.onload = disableCanvas;
}
</script>

<% end %>
	<div id="yescanvas">
		<div class="createTop container_12">
			<h1 class="create grid_12"><span class="visuallyhidden">CREATE</span></h1>
			<div id="nav" class="grid_12">
				<p><span class="dim"><%= link_to "Step 1: CHOOSE A STEREOGRAPH", "/create" %> &gt;</span> Step 2: CONVERT TO GIF/ANAGLYPH &gt; <span class="dim">Step 3: SEND</span></p>
			</div>
		</div>
		<div id="stereogranimator">
			<div class="canvasHolder">
				<canvas id="testCanvas" width="800" height="540"></canvas>
			</div>
			<div class="sideshow">
				<div id="toggler">
					<div id="toggleLinks">
						<a href="javascript:;" id="toggleAna">VIEW AS 3D ANAGLYPH</a>
						<a href="javascript:;" id="toggleGIF">VIEW AS ANIMATED GIF</a>
					</div>
					<div id="GIFExtraLinks">
						<div>
							<a href="javascript:;" id="slowSpeed">SLOW</a>
							<a href="javascript:;" id="medSpeed">MEDIUM</a>
							<a href="javascript:;" id="fastSpeed">FAST</a>
						</div>
					</div>
				</div>
				<div id="preview">
					<div id="previewContainer">
						<div id="previewGIF">
						</div>
						<div id="previewAnaglyph">
							<canvas id="resultCanvas"></canvas>
						</div>
					</div>
				</div>
				<div id="process">
					<canvas id="processCanvas" width="1000" height="1000"></canvas>
				</div>
			</div>
			<div class="nextStep">
				<p><a href="javascript:;" id="btnNext" class="genericButtonLink">CONTINUE TO STEP 3 &gt;</a></p>
			</div>
			<div class="clear"></div>
		</div>
	</div>
<%= render :partial => "shared/nocanvas" %>
